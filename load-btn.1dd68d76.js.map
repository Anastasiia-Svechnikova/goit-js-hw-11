{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,gFAOMC,EAAO,CACXC,KAAMC,SAASC,cAAc,gBAC7BC,QAASF,SAASC,cAAc,YAChCE,YAAaH,SAASC,cAAc,eAGlCG,EAAO,EACPC,EAAQ,G,SAIGC,I,OAAAA,EAAfC,EAAAX,EAAA,CAAAW,EAAAC,GAAAC,MAAA,SAAAC,EAA4BC,G,IAclBC,E,qEAbRD,EAAEE,iBACFR,EAAQM,EAAEG,OAAOC,SAASC,YAAYC,MAC5B,C,sBACRnB,EAAKI,QAAQgB,UAAY,GACzBX,EAAAY,GAASC,OAAOC,QAAQ,8BACxBrB,SAASsB,KAAKC,UAAUC,IAAI,SAC5B1B,EAAKK,YAAYoB,UAAUC,IAAI,U,iCAGjC1B,EAAKI,QAAQgB,UAAY,GACzBd,EAAO,EACPN,EAAKK,YAAYoB,UAAUC,IAAI,U,qBAEV,EAAAC,EAAAC,WAAUrB,G,YAAvBO,EAAIe,EAAAC,MAEAC,KAAKC,OAAM,C,uBACnB9B,SAASsB,KAAKC,UAAUC,IAAI,SAC5BjB,EAAAY,GAASC,OAAOC,QACd,4E,2BAKJd,EAAAY,GAASC,OAAOW,KAAK,oBAAmCC,OAAfpB,EAAKqB,UAAU,aACxDjC,SAASsB,KAAKC,UAAUW,OAAO,SAE/BC,EAAcvB,GAEH,GAAPR,EAAYQ,EAAKqB,WACnBnC,EAAKK,YAAYoB,UAAUW,OAAO,UAEzB,GAAP9B,EAAYQ,EAAKqB,YACnBnC,EAAKK,YAAYoB,UAAUC,IAAI,UAC/BjB,EAAAY,GAASC,OAAOW,KACd,+D,mDAIJK,QAAQC,IAAGV,EAAAW,I,4DAvCYC,MAAAC,KAAAC,W,SA6CZC,I,OAAAA,EAAfnC,EAAAX,EAAA,CAAAW,EAAAC,GAAAC,MAAA,SAAAC,I,IAGUE,E,kFADNR,GAAQ,E,UACW,EAAAqB,EAAAC,WAAUrB,EAAOD,G,OACpC+B,EADMvB,EAAIe,EAAAC,MAEC,GAAPxB,EAAYQ,EAAKqB,YACnBnC,EAAKK,YAAYoB,UAAUC,IAAI,UAC/BjB,EAAAY,GAASC,OAAOW,KACd,+D,gDAIJK,QAAQC,IAAGV,EAAAW,I,0DAZkBC,MAAAC,KAAAC,WAgBjC,SAASN,EAAcvB,GACrB,IAAM+B,GAAS,EAAAC,EAAAC,SAAajC,EAAKiB,MACjC/B,EAAKI,QAAQ4C,mBAAmB,YAAaH,GAE7C,IAAQI,EAAuB/C,SAC5BC,cAAc,YACd+C,kBAAkBC,wBAFbC,OAIRC,OAAOC,SAAS,CACdC,IAAkB,EAAbN,EACLO,SAAU,WAGI,IAAI/C,EAAAgD,GAAJ,CAAmB,aAAc,CAC/CC,aAAc,MACdC,aAAc,MAEhB,OAAO7C,EAhFTd,EAAKC,KAAK2D,iBAAiB,U,SAEC/C,G,OAAbL,EAAYiC,MAAAC,KAAAC,cA2C3B3C,EAAKK,YAAYuD,iBAAiB,S,kBAEnBhB,EAAkBH,MAAAC,KAAAC,c","sources":["src/js/index.js"],"sourcesContent":["import Notiflix from 'notiflix';\nimport axios from 'axios';\nimport { getImages } from './fetchImg';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport createMarkup from './create-markup';\n\nconst refs = {\n  form: document.querySelector('.search-form'),\n  gallery: document.querySelector('.gallery'),\n  loadMoreBtn: document.querySelector('.load-more'),\n};\n\nlet page = 1;\nlet query = '';\n\nrefs.form.addEventListener('submit', onFormSubmit);\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n  query = e.target.elements.searchQuery.value;\n  if (!query) {\n    refs.gallery.innerHTML = '';\n    Notiflix.Notify.failure('Enter the keyword, please!');\n    document.body.classList.add('intro');\n    refs.loadMoreBtn.classList.add('hidden');\n    return;\n  }\n  refs.gallery.innerHTML = '';\n  page = 1;\n  refs.loadMoreBtn.classList.add('hidden');\n  try {\n    const data = await getImages(query);\n\n    if (!data.hits.length) {\n      document.body.classList.add('intro');\n      Notiflix.Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n      return;\n    }\n\n    Notiflix.Notify.info(`Hooray! We found ${data.totalHits} images.`);\n    document.body.classList.remove('intro');\n\n    renderGallery(data);\n\n    if (page * 40 < data.totalHits) {\n      refs.loadMoreBtn.classList.remove('hidden');\n    }\n    if (page * 40 > data.totalHits) {\n      refs.loadMoreBtn.classList.add('hidden');\n      Notiflix.Notify.info(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nrefs.loadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\n\nasync function onLoadMoreBtnClick() {\n  try {\n    page += 1;\n    const data = await getImages(query, page);\n    renderGallery(data);\n    if (page * 40 > data.totalHits) {\n      refs.loadMoreBtn.classList.add('hidden');\n      Notiflix.Notify.info(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction renderGallery(data) {\n  const markup = createMarkup(data.hits);\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n\n  const gallery = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  return data;\n}\n"],"names":["$bpxeT","parcelRequire","$44ae6d9db4eaca0f$var$refs","form","document","querySelector","gallery","loadMoreBtn","$44ae6d9db4eaca0f$var$page","$44ae6d9db4eaca0f$var$query","$44ae6d9db4eaca0f$var$_onFormSubmit","$parcel$interopDefault","$2TvXO","mark","_callee","e","data","preventDefault","target","elements","searchQuery","value","innerHTML","$iU1Pc","Notify","failure","body","classList","add","$1DGNh","getImages","_ctx","sent","hits","length","info","concat","totalHits","remove","$44ae6d9db4eaca0f$var$renderGallery","console","log","t0","apply","this","arguments","$44ae6d9db4eaca0f$var$_onLoadMoreBtnClick","markup","$dI30Z","default","insertAdjacentHTML","cardHeight","firstElementChild","getBoundingClientRect","height","window","scrollBy","top","behavior","$5IjG7","captionsData","captionDelay","addEventListener"],"version":3,"file":"load-btn.1dd68d76.js.map"}