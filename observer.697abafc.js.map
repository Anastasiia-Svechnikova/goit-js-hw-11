{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,gFAOMC,EAAO,CACXC,KAAMC,SAASC,cAAc,gBAC7BC,QAASF,SAASC,cAAc,YAChCE,YAAaH,SAASC,cAAc,cACpCG,MAAOJ,SAASC,cAAc,cAG5BI,EAAO,EACPC,EAAQ,G,SAIGC,I,OAAAA,EAAfC,EAAAZ,EAAA,CAAAY,EAAAC,GAAAC,MAAA,SAAAC,EAA4BC,G,IAclBC,E,qEAbRD,EAAEE,iBACFR,EAAQM,EAAEG,OAAOC,SAASC,YAAYC,MAC5B,C,sBACRpB,EAAKI,QAAQiB,UAAY,GACzBX,EAAAY,GAASC,OAAOC,QAAQ,8BACxBtB,SAASuB,KAAKC,UAAUC,IAAI,S,iCAI9B3B,EAAKI,QAAQiB,UAAY,GACzBd,EAAO,E,oBAGc,EAAAqB,EAAAC,WAAUrB,G,YAAvBO,EAAIe,EAAAC,MAEAC,KAAKC,OAAM,C,uBACnBvB,EAAAY,GAASC,OAAOC,QACd,4E,2BAKJd,EAAAY,GAASC,OAAOW,KAAK,oBAAmCC,OAAfpB,EAAKqB,UAAU,aACxDlC,SAASuB,KAAKC,UAAUW,OAAO,SAE/BC,EAAcvB,GACdwB,EAASC,QAAQxC,EAAKM,O,kDAEtBmC,QAAQC,IAAGZ,EAAAa,I,2DA7BYC,MAAAC,KAAAC,WAF3B9C,EAAKC,KAAK8C,iBAAiB,U,SAECjC,G,OAAbL,EAAYmC,MAAAC,KAAAC,cAiC3B,IAKMP,EAAW,IAAIS,sB,SAEQC,G,OAAdC,EAAaN,MAAAC,KAAAC,aAPZ,CACdK,KAAM,KACNC,WAAY,QACZC,UAAW,I,SAIEH,I,OAAAA,EAAfxC,EAAAZ,EAAA,CAAAY,EAAAC,GAAAC,MAAA,SAAAC,EAA6BoC,G,+EAErBA,EAAQ,GAAGK,eAAc,C,sBAC3B/C,GAAQ,E,UACW,EAAAqB,EAAAC,WAAUrB,EAAOD,G,OACpC+B,EADUR,EAAAC,M,uDAIZU,QAAQC,IAAGZ,EAAAa,I,0DARaC,MAAAC,KAAAC,WAW5B,SAASR,EAAcvB,GACrB,IAAMwC,GAAS,EAAAC,EAAAC,SAAa1C,EAAKiB,MACjChC,EAAKI,QAAQsD,mBAAmB,YAAaH,GAE7B,IAAI7C,EAAAiD,GAAJ,CAAmB,aAAc,CAC/CC,aAAc,MACdC,aAAc,MAEhB,OAAO9C,G","sources":["src/js/index-observer.js"],"sourcesContent":["import Notiflix from 'notiflix';\nimport axios from 'axios';\nimport { getImages } from './fetchImg';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport createMarkup from './create-markup';\n\nconst refs = {\n  form: document.querySelector('.search-form'),\n  gallery: document.querySelector('.gallery'),\n  loadMoreBtn: document.querySelector('.load-more'),\n  guard: document.querySelector('.js-guard'),\n};\n\nlet page = 1;\nlet query = '';\n\nrefs.form.addEventListener('submit', onFormSubmit);\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n  query = e.target.elements.searchQuery.value;\n  if (!query) {\n    refs.gallery.innerHTML = '';\n    Notiflix.Notify.failure('Enter the keyword, please!');\n    document.body.classList.add('intro');\n\n    return;\n  }\n  refs.gallery.innerHTML = '';\n  page = 1;\n\n  try {\n    const data = await getImages(query);\n\n    if (!data.hits.length) {\n      Notiflix.Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n      return;\n    }\n\n    Notiflix.Notify.info(`Hooray! We found ${data.totalHits} images.`);\n    document.body.classList.remove('intro');\n\n    renderGallery(data);\n    observer.observe(refs.guard);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nconst options = {\n  root: null,\n  rootMargin: '300px',\n  threshold: 1,\n};\nconst observer = new IntersectionObserver(updateGallery, options);\n\nasync function updateGallery(entries) {\n  try {\n    if (entries[0].isIntersecting) {\n      page += 1;\n      const data = await getImages(query, page);\n      renderGallery(data);\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\nfunction renderGallery(data) {\n  const markup = createMarkup(data.hits);\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n\n  const gallery = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  return data;\n}\n"],"names":["$bpxeT","parcelRequire","$0358f4f03d0a0938$var$refs","form","document","querySelector","gallery","loadMoreBtn","guard","$0358f4f03d0a0938$var$page","$0358f4f03d0a0938$var$query","$0358f4f03d0a0938$var$_onFormSubmit","$parcel$interopDefault","$2TvXO","mark","_callee","e","data","preventDefault","target","elements","searchQuery","value","innerHTML","$iU1Pc","Notify","failure","body","classList","add","$1DGNh","getImages","_ctx","sent","hits","length","info","concat","totalHits","remove","$0358f4f03d0a0938$var$renderGallery","$0358f4f03d0a0938$var$observer","observe","console","log","t0","apply","this","arguments","addEventListener","IntersectionObserver","entries","$0358f4f03d0a0938$var$_updateGallery","root","rootMargin","threshold","isIntersecting","markup","$dI30Z","default","insertAdjacentHTML","$5IjG7","captionsData","captionDelay"],"version":3,"file":"observer.697abafc.js.map"}