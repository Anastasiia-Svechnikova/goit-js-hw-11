{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,sDAOA,MAAMC,EAAO,CACXC,KAAMC,SAASC,cAAc,gBAC7BC,QAASF,SAASC,cAAc,YAChCE,YAAaH,SAASC,cAAc,eAGtC,IAAIG,EAAO,EACPC,EAAQ,GA0DZ,SAASC,EAAcC,GACrB,MAAMC,GAAS,EAAAC,EAAAC,SAAaH,EAAKI,MACjCb,EAAKI,QAAQU,mBAAmB,YAAaJ,GAE7C,MAAQK,OAAQC,GAAed,SAC5BC,cAAc,YACdc,kBAAkBC,wBAErBC,OAAOC,SAAS,CACdC,IAAkB,EAAbL,EACLM,SAAU,WAGI,IAAIC,EAAAC,GAAJ,CAAmB,aAAc,CAC/CC,aAAc,MACdC,aAAc,MAEhB,OAAOjB,EAzETT,EAAKC,KAAK0B,iBAAiB,UAE3BC,eAA4BC,GAG1B,GAFAA,EAAEC,iBACFvB,EAAQsB,EAAEE,OAAOC,SAASC,YAAYC,OACjC3B,EAKH,OAJAP,EAAKI,QAAQ+B,UAAY,GACzBZ,EAAAzB,GAASsC,OAAOC,QAAQ,8BACxBnC,SAASoC,KAAKC,UAAUC,IAAI,cAC5BxC,EAAKK,YAAYkC,UAAUC,IAAI,UAGjCxC,EAAKI,QAAQ+B,UAAY,GACzB7B,EAAO,EAEP,IACE,MAAMG,QAAa,EAAAgC,EAAAC,WAAUnC,GAE7B,IAAKE,EAAKI,KAAK8B,OAIb,YAHApB,EAAAzB,GAASsC,OAAOC,QACd,4EAKJd,EAAAzB,GAASsC,OAAOQ,KAAK,oBAAoBnC,EAAKoC,qBAC9C3C,SAASoC,KAAKC,UAAUO,OAAO,SAE/BtC,EAAcC,GAEH,GAAPH,EAAYG,EAAKoC,WACnB7C,EAAKK,YAAYkC,UAAUO,OAAO,UAEzB,GAAPxC,EAAYG,EAAKoC,WACnB7C,EAAKK,YAAYkC,UAAUC,IAAI,UAEjC,MAAOO,GACPC,QAAQC,IAAIF,OAIhB/C,EAAKK,YAAYsB,iBAAiB,SAElCC,iBACE,IACEtB,GAAQ,EACR,MAAMG,QAAa,EAAAgC,EAAAC,WAAUnC,EAAOD,GACpCE,EAAcC,GACH,GAAPH,EAAYG,EAAKoC,WACnB7C,EAAKK,YAAYkC,UAAUC,IAAI,UAEjC,MAAOO,GACPC,QAAQC,IAAIF","sources":["src/js/index.js"],"sourcesContent":["import Notiflix from 'notiflix';\nimport axios from 'axios';\nimport { getImages } from './fetchImg';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport createMarkup from './create-markup';\n\nconst refs = {\n  form: document.querySelector('.search-form'),\n  gallery: document.querySelector('.gallery'),\n  loadMoreBtn: document.querySelector('.load-more'),\n};\n\nlet page = 1;\nlet query = '';\n\nrefs.form.addEventListener('submit', onFormSubmit);\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n  query = e.target.elements.searchQuery.value;\n  if (!query) {\n    refs.gallery.innerHTML = '';\n    Notiflix.Notify.failure('Enter the keyword, please!');\n    document.body.classList.add('intro');\n    refs.loadMoreBtn.classList.add('hidden');\n    return;\n  }\n  refs.gallery.innerHTML = '';\n  page = 1;\n\n  try {\n    const data = await getImages(query);\n\n    if (!data.hits.length) {\n      Notiflix.Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n      return;\n    }\n\n    Notiflix.Notify.info(`Hooray! We found ${data.totalHits} images.`);\n    document.body.classList.remove('intro');\n\n    renderGallery(data);\n\n    if (page * 40 < data.totalHits) {\n      refs.loadMoreBtn.classList.remove('hidden');\n    }\n    if (page * 40 > data.totalHits) {\n      refs.loadMoreBtn.classList.add('hidden');\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nrefs.loadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\n\nasync function onLoadMoreBtnClick() {\n  try {\n    page += 1;\n    const data = await getImages(query, page);\n    renderGallery(data);\n    if (page * 40 > data.totalHits) {\n      refs.loadMoreBtn.classList.add('hidden');\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction renderGallery(data) {\n  const markup = createMarkup(data.hits);\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n\n  const gallery = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  return data;\n}\n"],"names":["$eWCmQ","parcelRequire","$85a5f86b715fe7db$var$refs","form","document","querySelector","gallery","loadMoreBtn","$85a5f86b715fe7db$var$page","$85a5f86b715fe7db$var$query","$85a5f86b715fe7db$var$renderGallery","data","markup","$k0Ust","default","hits","insertAdjacentHTML","height","cardHeight","firstElementChild","getBoundingClientRect","window","scrollBy","top","behavior","$parcel$interopDefault","$fZKcF","captionsData","captionDelay","addEventListener","async","e","preventDefault","target","elements","searchQuery","value","innerHTML","Notify","failure","body","classList","add","$dOcJw","getImages","length","info","totalHits","remove","error","console","log"],"version":3,"file":"load-btn.73a10af1.js.map"}